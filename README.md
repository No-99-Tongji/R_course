# CO2æ•°æ®é›†åˆå¹¶ä¸å¤„ç†é¡¹ç›®

[![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)](https://www.python.org/)
[![Pandas](https://img.shields.io/badge/Pandas-Latest-green.svg)](https://pandas.pydata.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

ä¸€ä¸ªå…¨é¢çš„CO2æ’æ”¾æ•°æ®é›†å¤„ç†å·¥å…·ï¼Œå°†å¤šä¸ªCSVæ–‡ä»¶åˆå¹¶æˆç»Ÿä¸€æ•°æ®é›†ï¼Œå¹¶æä¾›å¤šç§ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥ï¼Œç”Ÿæˆé€‚ç”¨äºä¸åŒåˆ†æåœºæ™¯çš„æ¸…æ´—æ•°æ®é›†ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ—¨åœ¨æ•´åˆæ¥è‡ªä¸åŒæ¥æºçš„CO2æ’æ”¾ç›¸å…³æ•°æ®ï¼Œé€šè¿‡ç³»ç»ŸåŒ–çš„æ•°æ®æ¸…æ´—å’Œç¼ºå¤±å€¼å¤„ç†ï¼Œä¸ºç ”ç©¶äººå‘˜ã€æ•°æ®åˆ†æå¸ˆå’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæä¾›é«˜è´¨é‡çš„æ•°æ®é›†ã€‚

### ä¸»è¦åŠŸèƒ½

- ğŸ”„ **æ™ºèƒ½æ•°æ®åˆå¹¶**ï¼šå°†6ä¸ªä¸åŒçš„CO2ç›¸å…³CSVæ–‡ä»¶åˆå¹¶ä¸ºç»Ÿä¸€æ•°æ®é›†
- ğŸ§¹ **çµæ´»æ•°æ®æ¸…æ´—**ï¼šæä¾›å¤šç§æ¸…æ´—å¼ºåº¦é€‰é¡¹ï¼ˆæ ‡å‡†ã€ä¸¥æ ¼ã€å®½æ¾ï¼‰
- ğŸ“Š **å¤šæ ·ç¼ºå¤±å€¼å¤„ç†**ï¼š7ç§ä¸åŒçš„ç¼ºå¤±å€¼å¡«å……ç­–ç•¥
- ğŸ“ˆ **è´¨é‡è¯„ä¼°æŠ¥å‘Š**ï¼šè¯¦ç»†çš„æ•°æ®è´¨é‡åˆ†æå’Œæ¨è
- ğŸ¯ **åœºæ™¯åŒ–è¾“å‡º**ï¼šé’ˆå¯¹ä¸åŒåˆ†æéœ€æ±‚ç”Ÿæˆä¸“ç”¨æ•°æ®é›†

## ğŸ“ é¡¹ç›®ç»“æ„

```
R_course/
â”œâ”€â”€ csv_data/                                    # åŸå§‹æ•°æ®æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ annual-co2-emissions-per-country.csv
â”‚   â”œâ”€â”€ carbon-emission-intensity-vs-gdp-per-capita.csv
â”‚   â”œâ”€â”€ co2-by-source.csv
â”‚   â”œâ”€â”€ co2-emissions-vs-gdp.csv
â”‚   â”œâ”€â”€ life-expectancy-at-birth-vs-co-emissions-per-capita.csv
â”‚   â””â”€â”€ share-co2-embedded-in-trade.csv
â”œâ”€â”€ refined_data/                                # å¤„ç†åæ•°æ®æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ co2_dataset_01_basic_cleaned.csv        # åŸºç¡€æ¸…æ´—ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_02_forward_fill.csv         # å‰å‘å¡«å……ç‰ˆæœ¬  
â”‚   â”œâ”€â”€ co2_dataset_03_interpolate.csv          # çº¿æ€§æ’å€¼ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_04_median_fill.csv          # ä¸­ä½æ•°å¡«å……ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_05_global_fill.csv          # å…¨å±€ç»Ÿè®¡å¡«å……ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_06_multiple_fill.csv        # å¤šé‡å¡«å……ç‰ˆæœ¬ [æ¨è]
â”‚   â”œâ”€â”€ co2_dataset_07_zero_fill.csv            # é›¶å€¼å¡«å……ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_08_complete_cases.csv       # å®Œæ•´æ¡ˆä¾‹ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_09_strict_multiple.csv      # ä¸¥æ ¼æ¸…æ´—ç‰ˆæœ¬
â”‚   â”œâ”€â”€ co2_dataset_10_loose_interpolate.csv    # å®½æ¾æ¸…æ´—ç‰ˆæœ¬
â”‚   â””â”€â”€ co2_datasets_summary_report.csv         # æ±‡æ€»æŠ¥å‘Š
â”œâ”€â”€ merge_co2_datasets.py                       # æ•°æ®åˆå¹¶è„šæœ¬
â”œâ”€â”€ data_cleaning.py                            # åŸºç¡€æ¸…æ´—è„šæœ¬
â”œâ”€â”€ complete_data_processing.py                 # å®Œæ•´å¤„ç†è„šæœ¬ [ä¸»è¦è„šæœ¬]
â”œâ”€â”€ merged_co2_dataset.csv                      # åˆå¹¶åçš„åŸå§‹æ•°æ®é›†
â”œâ”€â”€ CO2_Data_Processing_Report.md               # è¯¦ç»†å¤„ç†æŠ¥å‘Š
â””â”€â”€ README.md                                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
Python >= 3.12
pandas >= 2.3.3
numpy >= 2.3.4
pathlib (å†…ç½®)
```

### å®‰è£…ä¾èµ–

```bash
pip install pandas numpy
```

### ä½¿ç”¨æ–¹æ³•

#### 1. å®Œæ•´å¤„ç†æµç¨‹ï¼ˆæ¨èï¼‰

è¿è¡Œä¸»å¤„ç†è„šæœ¬ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®é›†ï¼š

```bash
python complete_data_processing.py
```

#### 2. åˆ†æ­¥å¤„ç†æµç¨‹

**æ­¥éª¤1ï¼šæ•°æ®åˆå¹¶**
```bash
python merge_co2_datasets.py
```

**æ­¥éª¤2ï¼šåŸºç¡€æ¸…æ´—**
```bash
python data_cleaning.py
```

## ğŸ“Š æ•°æ®é›†è¯´æ˜

### åŸå§‹æ•°æ®æº

| æ–‡ä»¶å | æè¿° | ä¸»è¦æŒ‡æ ‡ |
|--------|------|----------|
| `annual-co2-emissions-per-country.csv` | å„å›½å¹´åº¦CO2æ’æ”¾é‡ | å¹´åº¦æ€»æ’æ”¾é‡ |
| `carbon-emission-intensity-vs-gdp-per-capita.csv` | ç¢³æ’æ”¾å¼ºåº¦ä¸äººå‡GDP | ç¢³å¼ºåº¦ã€äººå‡GDP |
| `co2-by-source.csv` | æŒ‰æ¥æºåˆ†ç±»çš„CO2æ’æ”¾ | ç…¤ç‚­ã€çŸ³æ²¹ã€å¤©ç„¶æ°”ç­‰æ¥æºæ’æ”¾ |
| `co2-emissions-vs-gdp.csv` | CO2æ’æ”¾ä¸GDPå…³ç³» | äººå‡æ’æ”¾ã€GDPã€äººå£ |
| `life-expectancy-at-birth-vs-co-emissions-per-capita.csv` | é¢„æœŸå¯¿å‘½ä¸äººå‡CO2æ’æ”¾ | é¢„æœŸå¯¿å‘½ã€äººå‡æ’æ”¾ |
| `share-co2-embedded-in-trade.csv` | è´¸æ˜“ä¸­åµŒå…¥çš„CO2æ’æ”¾ä»½é¢ | è´¸æ˜“æ’æ”¾ä»½é¢ |

### å¤„ç†åæ•°æ®é›†å¯¹æ¯”

| æ•°æ®é›†ç‰ˆæœ¬ | è¡Œæ•° | åˆ—æ•° | å®ä½“æ•° | å®Œæ•´æ€§ | ç¼ºå¤±å€¼ | é€‚ç”¨åœºæ™¯ |
|------------|------|------|--------|--------|--------|----------|
| åŸºç¡€æ¸…æ´— | 29,013 | 17 | 300 | 60.3% | 161,374 | æ•°æ®æ¢ç´¢ |
| **å¤šé‡å¡«å…… [æ¨è]** | **29,013** | **17** | **300** | **100.0%** | **0** | **é€šç”¨åˆ†æ** |
| çº¿æ€§æ’å€¼ | 29,013 | 17 | 300 | 87.1% | 52,385 | æ—¶é—´åºåˆ—åˆ†æ |
| **å®Œæ•´æ¡ˆä¾‹** | **2,593** | **17** | **90** | **100.0%** | **0** | **æœºå™¨å­¦ä¹ ** |
| ä¸¥æ ¼æ¸…æ´—+å¤šé‡å¡«å…… | 26,331 | 14 | 257 | 100.0% | 0 | é«˜è´¨é‡åˆ†æ |
| å®½æ¾æ¸…æ´—+æ’å€¼ | 62,517 | 18 | 336 | 77.0% | 215,427 | æœ€å¤§è¦†ç›–åˆ†æ |

## ğŸ¯ ä½¿ç”¨åœºæ™¯æ¨è

### ğŸ¤– æœºå™¨å­¦ä¹ 
```python
# æ¨èä½¿ç”¨: co2_dataset_08_complete_cases.csv
import pandas as pd
df = pd.read_csv('refined_data/co2_dataset_08_complete_cases.csv')
# ç‰¹ç‚¹: æ— ç¼ºå¤±å€¼ï¼Œ2,593è¡Œé«˜è´¨é‡æ•°æ®ï¼Œé€‚åˆè®­ç»ƒæ¨¡å‹
```

### ğŸ“ˆ ç»Ÿè®¡åˆ†æ
```python
# æ¨èä½¿ç”¨: co2_dataset_06_multiple_fill.csv
df = pd.read_csv('refined_data/co2_dataset_06_multiple_fill.csv')
# ç‰¹ç‚¹: å¤šé‡å¡«å……ï¼Œå¹³è¡¡å„ç§å¡«å……ç­–ç•¥ï¼Œ29,013è¡Œå®Œæ•´æ•°æ®
```

### â±ï¸ æ—¶é—´åºåˆ—åˆ†æ
```python
# æ¨èä½¿ç”¨: co2_dataset_03_interpolate.csv
df = pd.read_csv('refined_data/co2_dataset_03_interpolate.csv')
# ç‰¹ç‚¹: çº¿æ€§æ’å€¼ä¿æŒæ—¶é—´åºåˆ—å¹³æ»‘æ€§ï¼Œ87.1%å®Œæ•´æ€§
```

### ğŸ”¬ å­¦æœ¯ç ”ç©¶
```python
# æ¨èä½¿ç”¨: co2_dataset_09_strict_multiple.csv
df = pd.read_csv('refined_data/co2_dataset_09_strict_multiple.csv')
# ç‰¹ç‚¹: ä¸¥æ ¼æ¸…æ´—+å¤šé‡å¡«å……ï¼Œ26,331è¡Œé«˜è´¨é‡æ•°æ®
```

### ğŸŒ å…¨çƒè¶‹åŠ¿åˆ†æ
```python
# æ¨èä½¿ç”¨: co2_dataset_10_loose_interpolate.csv
df = pd.read_csv('refined_data/co2_dataset_10_loose_interpolate.csv')
# ç‰¹ç‚¹: æœ€å¤§æ•°æ®è¦†ç›–ï¼Œ62,517è¡Œï¼Œ336ä¸ªå®ä½“
```

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç®—æ³•

1. **æ•°æ®åˆå¹¶ç®—æ³•**
   ```python
   # ä½¿ç”¨pandaså¤–è¿æ¥åˆå¹¶å¤šè¡¨
   merged_df = pd.merge(df1, df2, on=['Entity', 'Code', 'Year'], how='outer')
   ```

2. **ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥**
   ```python
   # å¤šé‡å¡«å……ç¤ºä¾‹
   df['column'] = df.groupby('Entity')['column'].fillna(method='ffill')  # å‰å‘å¡«å……
   df['column'] = df.groupby('Entity')['column'].transform(
       lambda x: x.interpolate(method='linear'))  # çº¿æ€§æ’å€¼
   df['column'] = df['column'].fillna(df.groupby('Year')['column'].transform('median'))  # å¹´ä»½ä¸­ä½æ•°
   ```

3. **è´¨é‡è¯„ä¼°ç®—æ³•**
   ```python
   # è®¡ç®—æ•°æ®å®Œæ•´æ€§
   completeness = (df.notna().sum().sum() / (len(df) * len(df.columns))) * 100
   ```

### å¤„ç†æµç¨‹

```
åŸå§‹CSVæ–‡ä»¶ â†’ æ•°æ®åˆå¹¶ â†’ å¹´ä»½è¿‡æ»¤ â†’ åŸºç¡€æ¸…æ´— â†’ ç¼ºå¤±å€¼å¤„ç† â†’ è´¨é‡è¯„ä¼° â†’ æœ€ç»ˆæ•°æ®é›†
     â†“            â†“         â†“         â†“          â†“          â†“          â†“
   6ä¸ªæ–‡ä»¶    å¤–è¿æ¥åˆå¹¶   1700å¹´å   åˆ é™¤ä½è´¨é‡   7ç§å¡«å……æ–¹æ³•   å®Œæ•´æ€§è®¡ç®—   11ä¸ªç‰ˆæœ¬
              ç»Ÿä¸€æ ¼å¼     æ•°æ®ç­›é€‰    è¡Œå’Œåˆ—       ç­–ç•¥åº”ç”¨     æŠ¥å‘Šç”Ÿæˆ     æ•°æ®é›†
```

## ğŸ“‹ æ•°æ®å­—å…¸

### åŸºç¡€åˆ—
- `Entity`: å®ä½“/å›½å®¶åç§°
- `Code`: å›½å®¶ä»£ç  (ISO 3å­—æ¯ä»£ç )
- `Year`: å¹´ä»½ (1700-2024)

### ä¸»è¦æ•°æ®åˆ—
- `Annual COâ‚‚ emissions`: å¹´åº¦CO2æ’æ”¾é‡ (å¨)
- `Annual COâ‚‚ emissions (per capita)`: äººå‡å¹´åº¦CO2æ’æ”¾é‡ (å¨/äºº)
- `Population (historical)`: å†å²äººå£æ•°æ®
- `GDP per capita`: äººå‡GDP
- `Life expectancy`: å‡ºç”Ÿæ—¶é¢„æœŸå¯¿å‘½ (å¹´)
- `Annual COâ‚‚ emissions from coal/oil/gas`: æŒ‰èƒ½æºç±»å‹çš„å¹´åº¦CO2æ’æ”¾é‡
- `Carbon intensity of GDP`: GDPç¢³å¼ºåº¦

## ğŸ“Š è´¨é‡æŒ‡æ ‡

### æ•°æ®å®Œæ•´æ€§åˆ†å¸ƒ
- **100%å®Œæ•´æ€§**: 5ä¸ªæ•°æ®é›† (é€‚åˆæ— ç¼ºå¤±å€¼éœ€æ±‚)
- **87.1%å®Œæ•´æ€§**: 1ä¸ªæ•°æ®é›† (å¹³è¡¡è´¨é‡å’Œæ•°é‡)
- **77%+å®Œæ•´æ€§**: 2ä¸ªæ•°æ®é›† (è¾ƒé«˜è´¨é‡)
- **60%+å®Œæ•´æ€§**: 2ä¸ªæ•°æ®é›† (ä¿ç•™åŸå§‹ç‰¹å¾)

### æ•°æ®è¦†ç›–èŒƒå›´
- **æ—¶é—´è·¨åº¦**: 1700-2024å¹´ (324å¹´)
- **å®ä½“æ•°é‡**: 90-336ä¸ªå›½å®¶/åœ°åŒº
- **æ•°æ®ç‚¹**: 2,593-62,517æ¡è®°å½•

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ¸…æ´—å‚æ•°
```python
# åœ¨complete_data_processing.pyä¸­ä¿®æ”¹å‚æ•°
df_cleaned = basic_clean(
    df_original, 
    max_missing_ratio=0.85,    # åˆ—æœ€å¤§ç¼ºå¤±æ¯”ä¾‹
    min_data_columns=2,        # è¡Œæœ€å°‘æ•°æ®åˆ—æ•°
    min_data_ratio=0.2         # è¡Œæœ€å°æ•°æ®æ¯”ä¾‹
)
```

### æ·»åŠ è‡ªå®šä¹‰å¡«å……æ–¹æ³•
```python
def fill_missing_custom(df):
    """è‡ªå®šä¹‰å¡«å……æ–¹æ³•"""
    # å®ç°ä½ çš„å¡«å……é€»è¾‘
    return df_filled
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- ğŸ“‘ **[å®Œæ•´å¤„ç†æŠ¥å‘Š](CO2_Data_Processing_Report.md)**: è¯¦ç»†çš„æ•°æ®å¤„ç†è¿‡ç¨‹å’Œè´¨é‡åˆ†æ
- ğŸ“Š **[æ±‡æ€»æŠ¥å‘Š](refined_data/co2_datasets_summary_report.csv)**: æ‰€æœ‰æ•°æ®é›†çš„é‡åŒ–å¯¹æ¯”

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)  
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…